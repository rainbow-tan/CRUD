<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沈高管理</title>

    <!-- 依赖的CSS样式 -->
    <link href="/static/zui-1.9.2-dist/dist/css/zui.css" rel="stylesheet">

    <!-- 依赖的JS -->
    <script src="/static/zui-1.9.2-dist/dist/lib/jquery/jquery.js"></script>
    <script src="/static/jquery/jquery.cookie.js" type="text/javascript"></script>
    <script src="/static/zui-1.9.2-dist/dist/js/zui.js"></script>
</head>
<style>
    #frame {
        min-height: 600px;
        width: 100%;
        height: 100%;
    }

    .row {
        margin-right: 10px;
        margin-left: 10px;
    }
</style>
<script>
    $(function () {
        // 列表选中添加active类
        $("#nav_ul > li>a").click(function () {
            // $("#nav_ul > li").removeClass("active")
            $("#nav_ul > li>a").css('background-color', 'bisque')
            // alert($(this).children)
            $(this).css('background-color', 'gold')
        })

        //获取url参数
        $.getUrlParam = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]);
            return null;
        }

        //自动判断首页列表并加载
        $.autoload = function () {
            if ($.getUrlParam('index') === '1') {
                $('#index_1').click()
                window.open("/Model/select.html/", "frame");
            } else if ($.getUrlParam('index') === '2') {
                $('#index_2').click()
                window.open("/Model2/select.html/", "frame");
            } else if ($.getUrlParam('index') === '3') {
                $('#index_3').click()
                window.open("/Model3/select.html/", "frame");
            } else if ($.getUrlParam('index') === '4') {
                $('#index_4').click()
                window.open("/Model4/select.html/", "frame");
            } else if ($.getUrlParam('index') === '5') {
                $('#index_5').click()
                window.open("/Model5/zhuye.html/", "frame");
            } else if ($.getUrlParam('index') === '6') {
                $('#index_6').click()
                window.open("/Model6/zhuye.html/", "frame");
            } else if ($.getUrlParam('index') === '7') {
                $('#index_7').click()
                window.open("/Model7/select.html/", "frame");
            } else if ($.getUrlParam('index') === '8') {
                $('#index_8').click()
                window.open("/Model8/select.html/", "frame");
            } else {
                //默认为第五个列表
                $('#index_5').click()
                window.open("/Model5/zhuye.html/", "frame");
            }
        }
        $.autoload()

        // 设置用户姓名
        $.setusername = function () {
            $('#username').text($.cookie('username'))
            $('#username').append('<span class="caret"></span>')
            let flag = $.cookie('show_add')
            if (flag == 'True') {
                $('#setting').removeClass('hidden')
            }
        }
        $.setusername()
    })
</script>

<body>
    <div class="container-full">
        <div class="row">
            <div class="col-12">
                <nav class="navbar navbar-default" role="navigation">
                    <div class="container-fluid">
                        <!-- 导航头部 -->
                        <div class="navbar-header">
                            <!-- 品牌名称或logo -->
                            <a class="navbar-brand" href="#" style="margin-left: 10px;">沈阳高铁基础设施段信号基础数据管理平台</a>
                        </div>
                        <!-- 导航项目 -->
                        <div class="collapse navbar-collapse">
                            <ul class="nav navbar-nav pull-right">
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" id="username">Admin<b
                                            class="caret"></b></a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a id="setting" class="" href="/ModelA/setting.html/"><span
                                                    class="glyphicon glyphicon-wrench"></span> 系统设置</a>
                                        </li>
                                        <li><a data-target="#exitModal" data-toggle="modal"
                                                href="javascript:void(0);"><span class="glyphicon glyphicon-off"></span>
                                                退出</a></li>
                                        <!-- <li><a href="#">HTML5</a></li>
                                        <li><a href="#">Javascript</a></li>
                                        <li class="divider"></li>
                                        <li><a href="#">探索宇宙</a></li> -->
                                    </ul>
                                </li>
                                <li><a href="#">帮助</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 column">
                <ul class="nav  nav-pills nav-justified " id="nav_ul">
                    <li><a style="background-color: lightblue;" href="/Model5/zhuye.html" id="index_5"
                            target="frame">年度测试工作任务表</a></li>
                    <li><a href="/Model6/zhuye.html/" id="index_6" target="frame">年度维修工作任务表</a></li>
                    <li><a href="/Model/select.html/" id="index_1" target="frame">信号设备限界档案</a></li>
                    <li><a href="/Model3/select.html/" id="index_3" target="frame">ZPW-2000轨道参数表</a></li>
                    <li><a href="/Model2/select.html/" id="index_2" target="frame">移频自动闭塞档案</a></li>
                    <li><a href="/Model4/select.html/" id="index_4" target="frame">移频轨道测试数据档案</a></li>
                    <li><a href="/Model7/select.html/" id="index_7" target="frame">仪器仪表台账</a></li>
                    <li><a href="/Model8/select.html/" id="index_8" target="frame">高速综合检测车检测台账</a></li>
                    <li><a href="#/" id="index_8" target="frame">等待新增</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <!-- <div class="col-md-12 column">
                <iframe scrolling="no" id="frame" name="frame" frameborder="0"></iframe>
            </div> -->

            <div style="position: absolute;left: 0px;width: 100%;top: 120px;bottom: 0px;">
                <iframe id="frame" name="frame" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>
    </div>

    <!-- 退出系统的模态窗口 -->
    <div class="modal fade" id="exitModal" role="dialog">
        <div class="modal-dialog" role="document" style="width: 30%;">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" data-dismiss="modal" type="button">
                        <span aria-hidden="true">×</span>
                    </button>
                    <h4 class="modal-title">离开</h4>
                </div>
                <div class="modal-body">
                    <p>您确定要退出系统吗？</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
                    <button class="btn btn-primary" data-dismiss="modal" onclick="window.location.href='../login.html';"
                        type="button">确定
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // 计算页面的实际高度，iframe自适应会用到
        // function calcPageHeight(doc) {
        //     var cHeight = Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)
        //     var sHeight = Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight)
        //     var height = Math.max(cHeight, sHeight)
        //     return height
        // }
        // //根据ID获取iframe对象
        // var ifr = document.getElementById('frame')
        // ifr.onload = function () {
        //     //解决打开高度太高的页面后再打开高度较小页面滚动条不收缩
        //     ifr.style.height = '0px';
        //     var iDoc = ifr.contentDocument || ifr.document
        //     var height = calcPageHeight(iDoc)
        //     if (height < 850) {
        //         height = 850;
        //     }
        //     ifr.style.height = height + 'px'
        // }

        function reinitIframe() {
            var iframe = document.getElementById("frame");
            try {
                var bHeight = iframe.contentWindow.document.body.scrollHeight;
                var dHeight = iframe.contentWindow.document.documentElement.scrollHeight;
                var height = Math.max(bHeight, dHeight);
                iframe.height = height;
            } catch (ex) {}
        }
        window.setInterval("reinitIframe()", 200);
    </script>
</body>

</html>